<!DOCTYPE html>
<!--
    Dr. Mark E. Lehr
    September 11th, 2017
    Include a function library with arrays utilization
-->
<html>
    <head>
        <title>Utilize the Savings Javascript Classes</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- Inserting Libraries -->
        <script type="text/javascript" src="./JavascriptSavingsClass.js">
        </script>
        <script type="text/javascript">
            //Function which retrieves the information
            //in a form
            function getForm(url){
                var info=url.split("?");
                var nameValuePairs=info[1].split("&");
                var $_GET = new Object;
                for(var i=0;i<nameValuePairs.length;i++){
                    var map=nameValuePairs[i].split("=");
                    var name=map[0];
                    var value=map[1];
                    $_GET[name]=value;
                }
                return $_GET;
            }
        </script>
    </head>
    <body>
         <script type="text/javascript">
            //Call the Get function
            var url=document.location.href;
            $_GET=getForm(url);
            //Declare variables
            var pv=$_GET['Present_Value'];   //Present Value $'s
            var int=$_GET['Interest_Rate']/100; //Interest Rate %
            var nYears=$_GET['Periods'];//Number of compounding periods years

            //Perform Calculation / Call the function
            fv1 = new S1(pv,int,nYears);
            fv2 = new S2(pv,int,nYears);
            fv3 = new S3(pv,int,nYears);
            fv4 = new S4(pv,int,nYears);
			//fv4.save4(); Cannot figure out why the recursion is overflowing
            fv5 = new S5(pv,int);
			var fv60={save:0};
            fv6 = new S6(pv,int,nYears, fv60);
			fv6.save6();
            fv7 = new S7(pv,int,nYears);
			dplay = new Display();
			

            //Display the results
            document.write("<p>Present Value   = $"+pv+"</p>");
            document.write("<p>Interest Rate   =  "+int*100+"%</p>");
            document.write("<p>Number of Years = "+nYears+"</p>");
            document.write("<p>Future Value    = $"+(fv1.save1()*1).toFixed(2)+"</p>");
            document.write("<p>Future Value    = $"+(fv2.save2()*1).toFixed(2)+"</p>");
            document.write("<p>Future Value    = $"+(fv3.save3()*1).toFixed(2)+"</p>");
            //document.write("<p>Future Value    = $"+(fv4.pv*1).toFixed(2)+"</p>");
            document.write("<p>Future Value    = $"+(fv5.save5()*1).toFixed(2)+"</p>");
            document.write("<p>Future Value    = $"+fv60.save.toFixed(2)+"</p>");
            dplay.display(fv7.save7());
        </script>
    </body>
</html>